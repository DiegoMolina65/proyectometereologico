<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="css/styles.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      setInterval(function(){
        $("#sensorData").load('getdata.php', function() {
          $("#sensorData table").addClass("sensor-table");

          // Dividir mediciones en listas horizontales
          var sensorList = $(".sensor-list");
          sensorList.each(function() {
            var sensors = $(this).children("td");
            sensors.wrapInner("<ul></ul>");
            sensors.each(function() {
              var sensorValue = $(this).text();
              $(this).html("<li>" + sensorValue + "</li>");
            });
          });
        });
      }, 2000);  // refresh every 2 seconds
    });
  </script>
</head>
<body>

<h1>Estado del Clima</h1>
<div id="sensorData">
  <table>
    <tr>
      <th>Sensor</th>
      <th>Valor</th>
    </tr>
    <tr class="sensor-list">
      <td>Temperatura</td>
      <td id="temperature"></td>
    </tr>
    <tr class="sensor-list">
      <td>Humedad</td>
      <td id="humidity"></td>
    </tr>
    <tr class="sensor-list">
      <td>Presion</td>
      <td id="pressure"></td>
    </tr>
    <tr class="sensor-list">
      <td>Calidad del Aire</td>
      <td id="airQuality"></td>
    </tr>
    <tr class="sensor-list">
      <td>Lluvia Detectada</td>
      <td id="lluviaDetectada"></td>
    </tr>
    <tr class="sensor-list">
      <td>Acumulado de Lluvia</td>
      <td id="acumuladoLluvia"></td>
    </tr>
    <tr class="sensor-list">
      <td>Velocidad del Viento</td>
      <td id="velocidadViento"></td>
    </tr>
  </table>
</div>

</body>
</html>
